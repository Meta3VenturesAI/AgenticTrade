<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Leveraged ETF Delta Strategy Report</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #fff;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .metrics {
            margin: 20px 0;
        }
        .equity-curve {
            margin: 20px 0;
            height: 200px;
            background-color: #ecf0f1;
        }
        /* Add CSS for PDF export styling if using WeasyPrint */
        @media print {
            body { background-color: #ffffff; }
            .equity-curve { height: auto; }
        }
    </style>
</head>
<body>
    <h1>Enhanced Leveraged ETF Delta Strategy Report</h1>
    <p><strong>Period:</strong> {{ start_date }} to {{ end_date }}</p>

    <h2>Performance Metrics</h2>
    <div class="metrics">
        <table>
            <tr>
                <th>Metric</th>
                <th>Value</th>
            </tr>
            {% for metric in metrics %}
            <tr>
                <td>{{ metric[0] }}</td>
                <td>{{ metric[1] }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <h2>Trade Log</h2>
    <table>
        <tr>
            <th>Date</th>
            <th>Ticker</th>
            <th>Action</th>
            <th>Return</th>
        </tr>
        {% for trade in trades %}
        <tr>
            <td>{{ trade.Date }}</td>
            <td>{{ trade.Ticker }}</td>
            <td>{{ trade.Action }}</td>
            <td>{{ "%.2f%%" | format(trade.Return * 100) }}</td>
        </tr>
        {% endfor %}
    </table>

    <h2>Equity Curve</h2>
    <div class="equity-curve">
        <!-- Placeholder for equity curve visualization; replace with a chart library (e.g., Chart.js) or static data -->
        <p>Equity Curve Data: {{ equity_curve | length }} points</p>
        <!-- Note: For PDF export, use a library like WeasyPrint to render charts. Add rendering logic in model.py -->
    </div>

    <p><em>Generated on {{ formatted_date }}</em></p>
</body>
</html>
